<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>blog — daylessday</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="blog.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <header>
    <h1>daylessday</h1>
    <nav class="site-nav">
      <a href="index.html#landing">home</a>
      <a href="https://21.bearblog.dev/blog/">journal</a>
      <a href="blog.html">blog</a>
      <div class="dropdown">
        <a href="#" class="dropdown-toggle">creative</a>
        <div class="dropdown-menu">
          <a href="https://www.flickr.com/-21" target="_blank">flickr</a>
          <a href="https://www.instagram.com/k0reless/" target="_blank">instagram</a>
        </div>
      </div>
    </nav>
  </header>

  <main class="blog-main">
    <!-- Blog Header with Title, Search, and Archives -->
    <header class="blog-header">
      <h1 class="blog-title">FLOOD THE GATES</h1>
      <div class="blog-header-controls">
        <!-- Search Box -->
        <div class="blog-search-container">
          <input type="text" id="blog-search" class="blog-search-input" placeholder="Search posts..." aria-label="Search blog posts">
        </div>
        <!-- Archives Dropdown -->
        <div class="blog-archives-dropdown">
          <button class="blog-archives-toggle" id="archives-toggle" aria-label="View archives" aria-expanded="false">
            Archives
          </button>
          <div class="blog-archives-menu" id="archives-menu" role="menu">
            <!-- Archives will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </header>

    <div class="blog-container">
      <!-- Blog Post Template -->
      <!-- Posts are ordered newest first (chronological) -->
      <article class="blog-post" id="post-2025-01-15" data-post-date="2025-01-15">
        <header class="post-header">
          <h2 class="post-title">Another Post Title</h2>
          <time class="post-date" datetime="2025-01-15">15 Jan, 2025</time>
        </header>
        
        <div class="post-content">
          <p>This is another blog post. Each post is separated with clear spacing and maintains the same typography-focused aesthetic.</p>
          
          <p>You can mix and match content types as needed—text, photos, YouTube videos, Spotify tracks, and playlists.</p>
        </div>
      </article>

      <article class="blog-post" id="post-2025-01-01" data-post-date="2025-01-01">
        <header class="post-header">
          <h2 class="post-title">Post Title</h2>
          <time class="post-date" datetime="2025-01-01">01 Jan, 2025</time>
        </header>
        
        <div class="post-content">
          <!-- Typography Content -->
          <p>Your write-up content goes here. This is a typography-focused blog layout designed for long-form writing, observations, and reflections.</p>
          
          <p>You can include multiple paragraphs, and the design will handle them gracefully with proper spacing and readability.</p>
          
          <!-- Photo Example -->
          <figure class="blog-photo">
            <img src="Assets/placeholder.jpg" alt="35mm photo description" loading="lazy">
            <figcaption class="photo-caption">Caption for your 35mm photo</figcaption>
            <div class="exif-data">
              <span class="exif-banner">DATE: [YYYY] | [CAMERA] | [LENS] | [FILM STOCK] | [W×H] | [PROFILE]</span>
            </div>
          </figure>
          
          <!-- YouTube Embed Example -->
          <div class="media-embed youtube-embed">
            <iframe 
              src="https://www.youtube.com/embed/VIDEO_ID" 
              title="YouTube video player" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen
              loading="lazy">
            </iframe>
          </div>
          
          <!-- Spotify Embed Example -->
          <div class="media-embed spotify-embed">
            <iframe 
              style="border-radius:12px" 
              src="https://open.spotify.com/embed/track/TRACK_ID?utm_source=generator" 
              width="100%" 
              height="352" 
              frameBorder="0" 
              allowfullscreen="" 
              allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
              loading="lazy">
            </iframe>
          </div>
          
          <!-- Spotify Playlist Embed Example -->
          <div class="media-embed spotify-embed">
            <iframe 
              style="border-radius:12px" 
              src="https://open.spotify.com/embed/playlist/PLAYLIST_ID?utm_source=generator" 
              width="100%" 
              height="352" 
              frameBorder="0" 
              allowfullscreen="" 
              allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
              loading="lazy">
            </iframe>
          </div>
          
          <p>Continue your writing after media embeds. The layout flows naturally between text, photos, and embedded content.</p>
          
          <!-- Multiple Photos Example -->
          <div class="photo-grid">
            <figure class="blog-photo">
              <img src="Assets/placeholder.jpg" alt="Photo 1" loading="lazy">
              <div class="exif-data">
                <span class="exif-banner">DATE: [YYYY] | [CAMERA] | [LENS] | [FILM STOCK]</span>
              </div>
            </figure>
            <figure class="blog-photo">
              <img src="Assets/placeholder.jpg" alt="Photo 2" loading="lazy">
              <div class="exif-data">
                <span class="exif-banner">DATE: [YYYY] | [CAMERA] | [LENS] | [FILM STOCK]</span>
              </div>
            </figure>
          </div>
        </div>
      </article>
    </div>
  </main>

  <footer>
    <p>© 2024</p>
  </footer>

  <script src="script.js"></script>
  <script>
    // Blog-specific functionality: Search, Archives, and Post Sorting
    (function() {
      'use strict';

      // Initialize when DOM is ready
      document.addEventListener('DOMContentLoaded', function() {
        
        // ============================================
        // ARCHIVES DROPDOWN FUNCTIONALITY
        // ============================================
        const archivesToggle = document.getElementById('archives-toggle');
        const archivesMenu = document.getElementById('archives-menu');
        
        // Collect all posts and create archives list
        function populateArchives() {
          const posts = document.querySelectorAll('.blog-post');
          const postsArray = Array.from(posts);
          
          // Sort posts by date (newest first) for archives display
          postsArray.sort(function(a, b) {
            const dateA = a.getAttribute('data-post-date') || a.querySelector('time[datetime]')?.getAttribute('datetime') || '';
            const dateB = b.getAttribute('data-post-date') || b.querySelector('time[datetime]')?.getAttribute('datetime') || '';
            return dateB.localeCompare(dateA); // Descending order (newest first)
          });
          
          // Clear existing archives menu
          archivesMenu.innerHTML = '';
          
          // Create archive items
          postsArray.forEach(function(post) {
            const titleElement = post.querySelector('.post-title');
            const dateElement = post.querySelector('.post-date');
            
            if (!titleElement || !dateElement) return;
            
            const title = titleElement.textContent.trim();
            const date = dateElement.textContent.trim();
            const datetime = dateElement.getAttribute('datetime');
            
            // Generate ID for post if it doesn't have one
            if (!post.id) {
              const dateStr = datetime || post.getAttribute('data-post-date') || '';
              post.id = 'post-' + dateStr.replace(/[^\w-]/g, '-');
            }
            
            const archiveItem = document.createElement('a');
            archiveItem.href = '#' + post.id;
            archiveItem.className = 'blog-archives-item';
            archiveItem.setAttribute('role', 'menuitem');
            archiveItem.setAttribute('tabindex', '0');
            
            // Create title span
            const titleSpan = document.createElement('span');
            titleSpan.className = 'blog-archives-item-title';
            titleSpan.textContent = title;
            
            // Create date span
            const dateSpan = document.createElement('span');
            dateSpan.className = 'blog-archives-item-date';
            dateSpan.textContent = date;
            
            archiveItem.appendChild(titleSpan);
            archiveItem.appendChild(dateSpan);
            
            // Add click handler to scroll to post
            archiveItem.addEventListener('click', function(e) {
              e.preventDefault();
              post.scrollIntoView({ behavior: 'smooth', block: 'start' });
              // Close dropdown
              archivesMenu.classList.remove('active');
              archivesToggle.setAttribute('aria-expanded', 'false');
              // Highlight post briefly
              post.style.transition = 'background-color 0.3s ease';
              post.style.backgroundColor = 'rgba(0, 0, 0, 0.03)';
              setTimeout(function() {
                post.style.backgroundColor = '';
                setTimeout(function() {
                  post.style.transition = '';
                }, 300);
              }, 1000);
            });
            
            archivesMenu.appendChild(archiveItem);
          });
          
          // Show message if no posts
          if (postsArray.length === 0) {
            const noPostsMsg = document.createElement('div');
            noPostsMsg.className = 'blog-archives-item';
            noPostsMsg.textContent = 'No posts found';
            noPostsMsg.style.color = '#999';
            noPostsMsg.style.fontStyle = 'italic';
            archivesMenu.appendChild(noPostsMsg);
          }
        }
        
        // Toggle archives dropdown
        if (archivesToggle && archivesMenu) {
          archivesToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            const isExpanded = archivesToggle.getAttribute('aria-expanded') === 'true';
            
            if (!isExpanded) {
              // Populate archives if empty
              if (archivesMenu.children.length === 0) {
                populateArchives();
              }
              archivesMenu.classList.add('active');
              archivesToggle.setAttribute('aria-expanded', 'true');
            } else {
              archivesMenu.classList.remove('active');
              archivesToggle.setAttribute('aria-expanded', 'false');
            }
          });
          
          // Close dropdown when clicking outside
          document.addEventListener('click', function(e) {
            if (!archivesMenu.contains(e.target) && !archivesToggle.contains(e.target)) {
              archivesMenu.classList.remove('active');
              archivesToggle.setAttribute('aria-expanded', 'false');
            }
          });
          
          // Close dropdown on escape key
          document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && archivesMenu.classList.contains('active')) {
              archivesMenu.classList.remove('active');
              archivesToggle.setAttribute('aria-expanded', 'false');
              archivesToggle.focus();
            }
          });
        }
        
        // ============================================
        // SEARCH FUNCTIONALITY
        // ============================================
        const searchInput = document.getElementById('blog-search');
        const posts = document.querySelectorAll('.blog-post');
        
        if (searchInput) {
          // Search on input
          searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase().trim();
            
            posts.forEach(function(post) {
              const titleElement = post.querySelector('.post-title');
              const contentElement = post.querySelector('.post-content');
              
              if (!titleElement || !contentElement) {
                post.classList.add('hidden');
                return;
              }
              
              const title = titleElement.textContent.toLowerCase();
              const content = contentElement.textContent.toLowerCase();
              
              // Search in title and content
              if (title.includes(searchTerm) || content.includes(searchTerm)) {
                post.classList.remove('hidden');
              } else {
                post.classList.add('hidden');
              }
            });
            
            // Update archives dropdown after search if it's open
            if (archivesMenu && archivesMenu.classList.contains('active')) {
              populateArchives();
            }
          });
          
          // Clear search on escape
          searchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
              searchInput.value = '';
              searchInput.dispatchEvent(new Event('input'));
              searchInput.blur();
            }
          });
        }
        
        // ============================================
        // ENSURE POSTS ARE SORTED (NEWEST FIRST)
        // ============================================
        // Posts are already in correct order in HTML (newest first)
        // This function ensures they remain sorted if dynamically added
        function sortPostsByDate() {
          const blogContainer = document.querySelector('.blog-container');
          if (!blogContainer) return;
          
          const postsArray = Array.from(document.querySelectorAll('.blog-post'));
          
          // Sort by date (newest first)
          postsArray.sort(function(a, b) {
            const dateA = a.getAttribute('data-post-date') || a.querySelector('time[datetime]')?.getAttribute('datetime') || '';
            const dateB = b.getAttribute('data-post-date') || b.querySelector('time[datetime]')?.getAttribute('datetime') || '';
            return dateB.localeCompare(dateA); // Descending order (newest first)
          });
          
          // Re-append posts in sorted order
          postsArray.forEach(function(post) {
            blogContainer.appendChild(post);
          });
        }
        
        // Sort posts on page load
        sortPostsByDate();
        
        // ============================================
        // TOUCH-FRIENDLY INTERACTIONS FOR MOBILE
        // ============================================
        // Ensure dropdown and search work on touch devices
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        
        if (isTouchDevice) {
          // Add touch-friendly classes
          if (archivesToggle) {
            archivesToggle.style.cursor = 'pointer';
            archivesToggle.style.touchAction = 'manipulation';
            archivesToggle.style.webkitTapHighlightColor = 'transparent';
          }
          
          if (searchInput) {
            searchInput.style.touchAction = 'manipulation';
          }
        }
      });
    })();
  </script>
</body>
</html>

